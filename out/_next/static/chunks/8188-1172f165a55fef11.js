"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8188],{643706:function(e,t,a){a.d(t,{Av:function(){return n},Kl:function(){return i},Zs:function(){return l},__:function(){return s},dD:function(){return c},dO:function(){return d},fR:function(){return u}});var r=a(828223),o=a(583248);let n=async()=>(await r.Z.get(o.P.SYSTEM_THEMES)).data.data,l=async e=>(await r.Z.post(o.P.UPDATE_THEME,e)).data,i=async(e,t,a)=>{let n=new FormData;return n.append("background",e),n.append("colorCode",t),n.append("opacity",String(a)),(await r.Z.post(o.P.UPDATE_THEME,n,{headers:{"Content-Type":"multipart/form-data"}})).data},d=e=>{let t=new URLSearchParams;return(null==e?void 0:e.sortBy)&&t.append("sortBy",e.sortBy),(null==e?void 0:e.sortOrder)&&t.append("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.page)&&t.append("page",String(e.page)),(null==e?void 0:e.limit)&&t.append("limit",String(e.limit)),r.Z.get("".concat(o.P.THEMES,"?").concat(t.toString()))},s=async e=>(await r.Z.post(o.P.THEMES,e,{headers:{"Content-Type":"multipart/form-data"}})).data.data,c=async(e,t)=>(await r.Z.put("".concat(o.P.THEMES,"/").concat(e),t)).data,u=async e=>(await r.Z.delete("".concat(o.P.THEMES,"/").concat(e))).data},38188:function(e,t,a){a.d(t,{ZP:function(){return O},f6:function(){return v},x4:function(){return f},kS:function(){return S},z2:function(){return y},gv:function(){return C},Ex:function(){return R},Ay:function(){return T},Tm:function(){return P}});var r=a(620301),o=a(883464),n=a(583248);let l=async e=>{let{username:t,email:a,password:r}=e;return(await o.Z.post(n.P.REGISTER,{username:t,email:a,password:r})).data},i=async e=>{let{email:t,password:a}=e;return(await o.Z.post(n.P.LOGIN,{email:t,password:a})).data},d=async e=>(await o.Z.post(n.P.FORGOT_PASSWORD,{email:e.email})).data,s=async e=>{let{token:t,newPassword:a}=e;return(await o.Z.post(n.P.RESET_PASSWORD,{token:t,newPassword:a})).data};var c=a(906957),u=a(98104),m=a(712643),p=a(331016),g=a(86586);let h={isAuthenticated:!1,user:null,loading:!1,error:null,roles:[],step:"login",isOnboardingCompleted:!1,rememberMe:!1,selectedRole:null},f=(0,r.hg)("auth/login",async(e,t)=>{try{let t=await i(e),a=e.rememberMe||!1;(0,u.mB)(t.data.token,a);let r=new Date().toISOString();return localStorage.setItem("loginRequestTime",r),{...t.data,activeShiftCount:t.data.activeShift}}catch(r){let e="Invalid Credential";if("object"==typeof r&&null!==r&&"response"in r&&"object"==typeof r.response){var a;let t=r.response;e=(null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e}return t.rejectWithValue(e)}}),y=(0,r.hg)("auth/register",async(e,t)=>{try{return await l(e)}catch(r){let e="Registration failed";if("object"==typeof r&&null!==r&&"response"in r&&"object"==typeof r.response){var a;let t=r.response;e=(null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e}return t.rejectWithValue(e)}}),v=(0,r.hg)("auth/forgot",async(e,t)=>{try{return await d(e)}catch(r){let e="Request failed";if("object"==typeof r&&null!==r&&"response"in r&&"object"==typeof r.response){var a;let t=r.response;e=(null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e}return t.rejectWithValue(e)}}),C=(0,r.hg)("auth/resetPassword",async(e,t)=>{let{token:a,newPassword:r}=e;try{return await s({token:a,newPassword:r})}catch(a){let e="Reset password failed";if("object"==typeof a&&null!==a&&"response"in a&&"object"==typeof a.response){var o;let t=a.response;e=(null==t?void 0:null===(o=t.data)||void 0===o?void 0:o.message)||e}return t.rejectWithValue(e)}}),S=(0,r.hg)("auth/logout",async(e,t)=>{try{return await (0,c.B1)(),t.dispatch((0,g.iy)()),localStorage.removeItem("persist:onboarding"),["auth_token","rememberMe","userSignatureBase64","selectedRole","loginRequestTime","isOnboardingCompleted","documentViewMode"].forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),document.cookie="selectedRole=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",!0}catch(e){return localStorage.removeItem("persist:onboarding"),["auth_token","rememberMe","userSignatureBase64","selectedRole","loginRequestTime","isOnboardingCompleted","documentViewMode"].forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),document.cookie="selectedRole=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",!0}}),b=(0,r.oM)({name:"auth",initialState:h,reducers:{setStep(e,t){e.step=t.payload},setUser(e,t){e.user=t.payload,e.isAuthenticated=!!t.payload},setOnboardingCompleted(e,t){e.isOnboardingCompleted=t.payload,t.payload?localStorage.setItem("isOnboardingCompleted","true"):localStorage.setItem("isOnboardingCompleted","false")},setRememberMe(e,t){e.rememberMe=t.payload,localStorage.setItem("rememberMe",t.payload.toString())},clearError(e){e.error=null},setSelectedRoles:(e,t)=>{e.selectedRole=t.payload,localStorage.setItem("selectedRole",t.payload),document.cookie="selectedRole=".concat(t.payload,"; path=/")},clearOnboardingData(){localStorage.removeItem("persist:onboarding")},reset:()=>h},extraReducers:e=>{e.addCase(f.pending,e=>{e.loading=!0,e.error=null}).addCase(f.fulfilled,(e,t)=>{e.loading=!1,e.isAuthenticated=!0,e.user={...t.payload.user,activeShiftCount:t.payload.activeShiftCount},e.roles=t.payload.user.roles.map(e=>e.name);let a=t.meta.arg;e.rememberMe=a.rememberMe||!1,e.isOnboardingCompleted=!1}).addCase(f.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(y.pending,e=>{e.loading=!0,e.error=null}).addCase(y.fulfilled,e=>{e.loading=!1}).addCase(y.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(v.pending,e=>{e.loading=!0,e.error=null}).addCase(v.fulfilled,e=>{e.loading=!1}).addCase(v.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(C.pending,e=>{e.loading=!0,e.error=null}).addCase(C.fulfilled,e=>{e.loading=!1}).addCase(C.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(m.ac.fulfilled,(e,t)=>{if(e.user){let a=e.theme,r=(null==a?void 0:a.themes)||[],o=(0,p.C5)(e.user,r,t.payload);o&&(e.user.theme=o)}}).addCase(S.pending,e=>{e.loading=!0}).addCase(S.fulfilled,e=>{e.loading=!1,e.user=null,e.isOnboardingCompleted=!1,e.isAuthenticated=!1,e.rememberMe=!1,e.selectedRole=null,e.roles=[],e.step="login",e.error=null}).addCase(S.rejected,e=>{e.loading=!1,e.user=null,e.isOnboardingCompleted=!1,e.isAuthenticated=!1,e.rememberMe=!1,e.selectedRole=null,e.roles=[],e.step="login",e.error=null})}}),{setStep:w,setUser:E,setOnboardingCompleted:R,setRememberMe:T,clearError:j,clearOnboardingData:M,reset:U,setSelectedRoles:P}=b.actions;var O=b.reducer},712643:function(e,t,a){a.d(t,{Tn:function(){return d},Wf:function(){return l},ac:function(){return i}});var r=a(620301),o=a(643706),n=a(658720);let l=(0,r.hg)("theme/getSystemThemes",async(e,t)=>{try{return await (0,o.Av)()}catch(e){return t.rejectWithValue((0,n.e$)(e,"Failed to get themes"))}}),i=(0,r.hg)("theme/updateUserTheme",async(e,t)=>{try{return(await (0,o.Zs)(e)).data}catch(e){return t.rejectWithValue((0,n.e$)(e,"Failed to update themes"))}}),d=(0,r.hg)("theme/uploadBackgroundImage",async(e,t)=>{let{file:a,colorCode:r,opacity:l}=e;try{return(await (0,o.Kl)(a,r,l)).data}catch(e){return t.rejectWithValue((0,n.e$)(e,"Failed to upload Image"))}}),s=(0,r.oM)({name:"theme",initialState:{themes:[],loading:!1,error:null,mode:"light"},reducers:{setThemeMode:(e,t)=>{e.mode=t.payload}},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.themes=t.payload}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{setThemeMode:c}=s.actions;t.ZP=s.reducer},658720:function(e,t,a){a.d(t,{Gg:function(){return i},_0:function(){return n},e$:function(){return s},jM:function(){return r},kn:function(){return l},o8:function(){return d},uf:function(){return o}});let r=e=>(null==e?void 0:e.length)?e.includes("Administrator")?"Administrator":e.includes("Active Controller")?"Active Controller":e.includes("Observer")?"Observer":e[0]:"Active Controller",o=["#000000","#FFB800","#FF6B6B","#FF3F2F","#3D96E1","#A259FF","#6C63FF","#F66104"],n="\n  .pdf,\n  image/png,\n  image/jpeg,\n  image/jpg,\n  image/gif,\n  application/msword,\n  text/plain,\n  text/csv,\n  application/ms-excel,\n  video/mp4,\n  audio/mpeg,\n  audio/wav\n".replace(/\s+/g,"");"\n  image/png,\n  image/jpeg,\n  image/jpg,\n".replace(/\s+/g,"");let l=["All","Recent","Search"],i=1e3,d=6;function s(e){var t,a,r,o;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An error occurred";return null!==(o=null!==(r=null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)&&void 0!==r?r:(null==e?void 0:e.message)&&"Network Error"!==e.message?e.message:void 0)&&void 0!==o?o:n}},331016:function(e,t,a){a.d(t,{C5:function(){return d},DU:function(){return i},U9:function(){return n},Wf:function(){return l}});var r=a(633623);let o=()=>({imageUrl:r.VZ.bgPic,colorCode:"#3D96E1",opacity:.45}),n=(e,t,a)=>{if(a&&a.imageUrl)return{imageUrl:a.imageUrl,colorCode:a.colorCode||"#3D96E1",opacity:a.opacity||.45};if(null==e?void 0:e.theme){let a=e.theme;if(a.isSelected===r.we&&a.theme){let e=t.find(e=>e._id===a.theme._id);return e?{imageUrl:e.imageUrl,colorCode:a.theme.colorCode,opacity:a.theme.opacity}:{imageUrl:a.imageUrl||r.VZ.bgPic,colorCode:a.theme.colorCode,opacity:a.theme.opacity}}return a.isSelected,r.qN,{imageUrl:a.imageUrl||r.VZ.bgPic,colorCode:a.colorCode||"#3D96E1",opacity:a.opacity||.45}}return o()},l=e=>e.filter(e=>!e.isSelected),i=e=>e.find(e=>e.isSelected)||null,d=(e,t,a)=>{if(null==e?void 0:e.theme){if(a.isSelected===r.qN)return{imageUrl:a.imageUrl||r.VZ.bgPic,colorCode:a.colorCode,opacity:a.opacity,isSelected:r.qN};if(a.isSelected===r.we&&a.theme){var o,n;let l=t.find(e=>{var t;return e._id===(null===(t=a.theme)||void 0===t?void 0:t._id)});return l?{imageUrl:l.imageUrl,colorCode:a.theme.colorCode,opacity:a.theme.opacity,isSelected:r.we,theme:a.theme}:{imageUrl:e.theme.imageUrl||r.VZ.bgPic,colorCode:(null===(o=a.theme)||void 0===o?void 0:o.colorCode)||"#3D96E1",opacity:(null===(n=a.theme)||void 0===n?void 0:n.opacity)||.45,isSelected:r.we,theme:a.theme}}return e.theme}}}}]);