(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2214],{351455:function(e,n,t){Promise.resolve().then(t.bind(t,227741))},227741:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var i=t(557437),r=t(902265),s=t(938543),o=t(273088),l=t(790658),a=t(703460),d=t(575263),c=t(219352),u=t(31504),x=t(977639),h=t(688317),v=t(212961),f=t(433145),g=t(799376),p=t(118627),m=t(842858),j=t(86586),Z=t(38188),b=t(899765),C=t(560087),y=t(720280),S=t(633623),k=t(18150);function w(){var e;let n=(0,g.useRouter)(),{t}=(0,p.$)(),w=(0,m.T)(),{areasOfResponsibility:E,loading:W,shiftAssignment:_,companies:A,selectedCompanies:F}=(0,m.C)(e=>e.onboarding),[I,Q]=(0,r.useState)([]),[N,B]=(0,r.useState)(!1),[z,D]=(0,r.useState)(!1),[P,H]=(0,r.useState)([]);(0,r.useEffect)(()=>{w((0,j.Ao)()),w((0,j.Vy)([])),w((0,j.UB)([]))},[w]),(0,r.useEffect)(()=>{F.length>0&&(w((0,j.ff)(F)),w((0,j.UB)([...F])))},[F,w]),(0,r.useEffect)(()=>{var e;let n=null!==(e=null==E?void 0:E.recentAor)&&void 0!==e?e:[];if(n.length){let e=n.filter(e=>{var n;let t=null==E?void 0:null===(n=E.aors)||void 0===n?void 0:n.find(n=>n._id===e);return t&&!t.isLocked});e.length&&(Q(e),w((0,j.Au)(e)))}},[null==E?void 0:E.recentAor,null==E?void 0:E.aors,w]);let L=(0,r.useCallback)(e=>{var n;let i=null==E?void 0:null===(n=E.aors)||void 0===n?void 0:n.find(n=>n._id===e);if(null==i?void 0:i.isLocked){w((0,b.wp)({message:t("areaSelection.lockedAor"),type:C.N.Warning}));return}let r=I.includes(e);if(!r&&I.length>=S.Ik){w((0,b.wp)({message:t("areaSelection.maxAor",{max:S.Ik}),type:C.N.Error}));return}let s=r?I.filter(n=>n!==e):[...I,e];Q(s),w((0,j.Au)(s))},[I,w,t,null==E?void 0:E.aors]),M=(0,r.useCallback)(e=>{w((0,b.wp)({message:t(e),type:C.N.Error}))},[w,t]),R=async e=>{if(e.preventDefault(),!I.length)return M("areaSelection.error");if(!(null==_?void 0:_.ratingId)||!(null==_?void 0:_.continuousRestHours))return M("areaSelection.missingDataError");B(!0);try{await w((0,j.JD)({aorId:I,ratingId:_.ratingId,continuousRestHours:_.continuousRestHours,loginTime:_.loginTime})).unwrap(),await w((0,Z.Ex)(!0)),w((0,b.wp)({message:t("areaSelection.success"),type:C.N.Success})),n.replace(S.QZ.shiftChange)}catch(e){B(!1),(null==e?void 0:e.statusCode)===400?w((0,b.wp)({message:t("areaSelection.indicator"),type:C.N.Info})):M((null==e?void 0:e.message)||"areaSelection.assignError")}};return W?(0,i.jsxs)(u.Z,{maxWidth:"sm",sx:y.W2.cardContainer,children:[(0,i.jsx)(l.Z,{variant:"h5",sx:y.W2.title,children:t("areaSelection.title")}),(0,i.jsx)(l.Z,{variant:"body2",sx:y.W2.subtitle,children:t("areaSelection.subtitle")}),(0,i.jsx)(s.Z,{sx:y.Q9.loadingContainer,children:(0,i.jsx)(h.default,{size:40,sx:{color:"#FFFFFF"}})})]}):(0,i.jsxs)(u.Z,{maxWidth:"sm",sx:y.W2.cardContainer,children:[(0,i.jsx)(l.Z,{variant:"h5",sx:y.W2.title,children:t("areaSelection.title")}),(0,i.jsx)(l.Z,{variant:"body2",sx:y.W2.subtitle,children:t("areaSelection.subtitle")}),(0,i.jsx)(s.Z,{sx:y.Q9.selectWrapper,children:(0,i.jsxs)(o.Z,{multiple:!0,value:P,onChange:e=>H(e.target.value),displayEmpty:!0,variant:"standard",sx:{...y.C3.select,width:"100%",textAlign:"left",...N?{pointerEvents:"none",opacity:.2}:{}},MenuProps:{PaperProps:{sx:y.C3.dropdownMenuPaper},disableRestoreFocus:!0,keepMounted:!0},open:z,onOpen:()=>{N||D(!0)},onClose:()=>{D(!1),P.length===F.length&&P.every((e,n)=>e===F[n])||w((0,j.Vy)([...P]))},disabled:N,renderValue:e=>0===e.length?(0,i.jsx)(l.Z,{sx:{...y.C3.hoursDescription,color:"#FFF",textAlign:"left"},children:t("areaSelection.select")}):(0,i.jsx)(l.Z,{sx:{textAlign:"left"},children:A.filter(n=>e.includes(n._id)).map(e=>e.name).join(", ")}),children:[(0,i.jsx)(a.Z,{value:"",disabled:!0,children:(0,i.jsx)(l.Z,{sx:y.C3.hoursDescription,children:t("areaSelection.select")})}),A.map(e=>(0,i.jsx)(a.Z,{value:e._id,children:(0,i.jsx)(d.Z,{primary:e.name,sx:{...y.C3.hoursDescription,textAlign:"left",color:P.includes(e._id)?"#3D96E1":"#FFF"}})},e._id))]})}),F.length>0&&(null==E?void 0:null===(e=E.aors)||void 0===e?void 0:e.length)>0&&!z&&(0,i.jsx)(s.Z,{sx:y.Q9.aorGridScrollContainer,children:(0,i.jsx)(c.Z,{container:!0,spacing:2,sx:y.Q9.gridContainer,children:E.aors.map(e=>{let n=I.includes(e._id),t=e.isLocked,r=t||N;return(0,i.jsx)(c.Z,{size:{xs:12,sm:6,md:6},children:(0,i.jsxs)(s.Z,{onClick:r?void 0:()=>L(e._id),sx:{...y.Q9.aorBox,...n?y.Q9.selectedBox:y.Q9.unselectedBox,...t?{opacity:.5,cursor:"not-allowed",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)"}:{},...N?{pointerEvents:"none"}:{}},children:[(0,i.jsx)(s.Z,{sx:n?y.Q9.iconContainerSelected:y.Q9.iconContainerUnselected,children:(0,i.jsx)(f.default,{src:S.VZ.vector,alt:"icon",width:18,height:18})}),(0,i.jsx)(k.Z,{title:t?"Already in use":"",disableHoverListener:!t,children:(0,i.jsx)(l.Z,{sx:{...y.Q9.aorLabel,...t?{color:"rgba(255, 255, 255, 0.6)"}:{}},children:e.name})}),n&&!t&&(0,i.jsx)(v.Z,{sx:y.Q9.aorIcon})]})},e._id)})})}),(0,i.jsxs)(s.Z,{sx:y.W2.buttonContainer,children:[(0,i.jsx)(x.Z,{variant:"contained",sx:y.W2.backButton,onClick:n.back,disabled:N,children:(0,i.jsx)(l.Z,{sx:y.W2.submitButtonText,children:t("common.back")})}),(0,i.jsx)(x.Z,{variant:"contained",size:"large",sx:y.W2.submitButton,onClick:R,disabled:N||0===I.length||0===F.length,children:N?(0,i.jsx)(h.default,{size:24,sx:{color:"white"}}):(0,i.jsx)(l.Z,{sx:y.W2.submitButtonText,children:t("areaSelection.startShift")})})]})]})}function E(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w,{})})}},688317:function(e,n,t){"use strict";var i=t(557437);t(902265);var r=t(408319),s=t(938543);n.default=e=>{let{center:n=!1,inline:t=!1,size:o=40,...l}=e;return t?(0,i.jsx)(r.Z,{size:o,...l}):(0,i.jsx)(s.Z,{display:n?"flex":void 0,justifyContent:n?"center":void 0,alignItems:n?"center":void 0,width:n?"100vw":void 0,height:n?"100vh":void 0,minHeight:n?"100vh":void 0,position:n?"fixed":void 0,top:n?0:void 0,left:n?0:void 0,zIndex:n?1300:void 0,bgcolor:n?"background.default":void 0,children:(0,i.jsx)(r.Z,{size:o,...l})})}},899765:function(e,n,t){"use strict";t.d(n,{M6:function(){return a},wp:function(){return l}});var i=t(620301),r=t(560087);let s={open:!1,message:"",type:r.N.Info},o=(0,i.oM)({name:"alert",initialState:s,reducers:{showAlert:(e,n)=>{e.open=!0,e.message=n.payload.message,e.type=n.payload.type||r.N.Info},closeAlert:e=>{e.open=!1,e.message=""}}}),{showAlert:l,closeAlert:a}=o.actions;n.ZP=o.reducer},560087:function(e,n,t){"use strict";var i,r;t.d(n,{N:function(){return i}}),(r=i||(i={})).Success="success",r.Error="error",r.Warning="warning",r.Info="info"}},function(e){e.O(0,[8969,6799,970,7639,8977,9352,3145,7286,8150,7540,9885,8188,280,2971,2117,1744],function(){return e(e.s=351455)}),_N_E=e.O()}]);